<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Forever Match</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top left, #ffe4e6, transparent), radial-gradient(circle at bottom right, #e0f2fe, transparent), linear-gradient(to bottom right, #fce7f3, #e879f9);
            background-size: cover;
            background-attachment: fixed;
            color: #4a5568;
            min-height: 100vh; /* Ensure background covers full height */
            display: flex; /* Use flex to center card vertically and horizontally */
            justify-content: center;
            align-items: flex-start; /* Align content to start, allowing scroll */
            padding: 2rem 1rem; /* Add padding for mobile view */
            box-sizing: border-box; /* Include padding in element's total width and height */
            overflow-y: auto; /* Allow vertical scrolling */
            position: relative; /* For hearts-container to be absolute relative to body */
        }
        #hearts-container {
            position: absolute; /* Changed to absolute */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Cover the entire scrollable body */
            pointer-events: none;
            overflow: hidden; /* Keep heart animations within the container */
            z-index: 0;
            min-height: 100%; /* Ensure it always covers at least the viewport height */
            min-width: 100%; /* Ensure it always covers at least the viewport width */
        }
        .heart {
            position: absolute;
            bottom: -50px;
            font-size: 1.5rem;
            color: rgba(236, 72, 153, 0.4);
            animation: floatUp 10s linear infinite;
        }
        @keyframes floatUp {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }
        .container-card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1), 0 6px 6px rgba(0,0,0,0.15);
            padding: 2.5rem;
            max-width: 28rem;
            width: 100%; /* Use 100% width, limited by max-width */
            text-align: center;
            animation: fadeIn 1s ease-in-out;
            z-index: 1; /* Ensure card is above hearts */
            margin: auto; /* Center the card horizontally */
        }
        .form-card {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
        }
        .results-card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-radius: 1.5rem;
            padding: 2.5rem;
            text-align: left;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        input, select {
            width: 100%;
            padding: 0.75rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #d1d5db;
            background-color: #f9fafb;
            transition: all 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #e879f9;
            box-shadow: 0 0 0 2px rgba(232, 121, 249, 0.5);
        }
        .btn {
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 700;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background-image: linear-gradient(to right, #f9a8d4, #f472b6, #e879f9);
            border: none;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .btn-primary:active {
            transform: translateY(0);
        }
        .btn-secondary {
            background-color: #f0abfc;
            color: #6d28d9;
            border: none;
        }
        .btn-secondary:hover {
            background-color: #e879f9;
            color: white;
        }
        #message-box {
            background-color: #fff1f2;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #fecaca;
            margin-top: 1rem;
            display: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Specific adjustments for smaller screens */
        @media (max-width: 640px) {
            .container-card {
                padding: 1.5rem; /* Smaller padding on small screens */
                border-radius: 1.5rem;
            }
            .form-card, .results-card {
                padding: 1.5rem;
                border-radius: 1rem;
            }
            .text-3xl {
                font-size: 2rem; /* Adjust heading size for mobile */
            }
            .text-lg {
                font-size: 1rem; /* Adjust paragraph size for mobile */
            }
            .heart {
                font-size: 1rem; /* Smaller hearts on mobile */
            }
        }
    </style>
</head>
<body>

    <div id="hearts-container"></div>

    <div id="main-content" class="container-card">
        <div id="form-container" class="form-card">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-pink-600">The Forever Matcher</h1>
            <p class="mt-4 mb-8 text-md sm:text-lg text-gray-600">Enter your details and discover who you're truly meant to be with! 😉</p>
            
            <div id="message-box"></div>

            <form id="details-form" class="space-y-4 text-left">
                <div>
                    <label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label>
                    <input type="text" id="fullName" name="fullName" required placeholder="Full Name">
                </div>
                <div>
                    <label for="gender" class="block text-sm font-medium text-gray-700">Gender</label>
                    <select id="gender" name="gender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div>
                    <label for="dob" class="block text-sm font-medium text-gray-700">Date of Birth</label>
                    <input type="text" id="dob" name="dob" required placeholder="DD/MM/YYYY" maxlength="10">
                </div>
                <div>
                    <label for="pob" class="block text-sm font-medium text-gray-700">Place of Birth</label>
                    <input type="text" id="pob" name="pob" required placeholder="e.g., Mumbai">
                </div>
                <div>
                    <label for="religion" class="block text-sm font-medium text-gray-700">Religion</label>
                    <input type="text" id="religion" name="religion" required placeholder="e.g., Hindu">
                </div>
                <div>
                    <label for="profession" class="block text-sm font-medium text-gray-700">Profession</label>
                    <input type="text" id="profession" name="profession" required placeholder="e.g., Scientist">
                </div>
                <button type="submit" class="btn btn-primary w-full mt-6">Find My Soulmate</button>
            </form>
        </div>

        <div id="results-container" class="hidden results-card">
            <div class="flex justify-center items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-pink-500 animate-pulse" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
                </svg>
            </div>
            <h2 id="results-heading" class="text-2xl sm:text-3xl font-extrabold text-pink-600 mt-4 mb-2 text-center">Your Forever Match</h2>
            <div class="mt-4 space-y-3">
                <p><span class="font-bold">Name:</span> <span id="futureName" class="text-gray-700"></span></p>
                <p><span class="font-bold">Gender:</span> <span id="futureGender" class="text-gray-700"></span></p>
                <p><span class="font-bold">Age:</span> <span id="futureAge" class="text-gray-700"></span></p>
                <p><span class="font-bold">Date of Birth:</span> <span id="futureDob" class="text-gray-700"></span></p>
                <p><span class="font-bold">Place of Birth:</span> <span id="futurePob" class="text-gray-700"></span></p>
                <p><span class="font-bold">Religion:</span> <span id="futureReligion" class="text-gray-700"></span></p>
                <p><span class="font-bold">Profession:</span> <span id="futureProfession" class="text-gray-700"></span></p>
            </div>
            <div class="mt-8 text-center bg-pink-50 p-4 rounded-xl border border-pink-200">
                <p class="text-md italic text-pink-600" id="loveQuote"></p>
            </div>
            <button id="go-back-btn" class="btn btn-secondary w-full mt-6">Go Back</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('details-form');
            const formContainer = document.getElementById('form-container');
            const resultsContainer = document.getElementById('results-container');
            const goBackButton = document.getElementById('go-back-btn');
            const dobInput = document.getElementById('dob');
            const nameInput = document.getElementById('fullName');
            const pobInput = document.getElementById('pob');
            const professionInput = document.getElementById('profession');
            const messageBox = document.getElementById('message-box');

            // --- Heart Animation ---
            const heartsContainer = document.getElementById('hearts-container');
            if (heartsContainer) {
                const createHeart = () => {
                    const heart = document.createElement('div');
                    heart.classList.add('heart');
                    heart.textContent = '♥';
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = Math.random() * 5 + 7 + 's'; // 7 to 12 seconds
                    heart.style.opacity = Math.random();
                    heart.style.fontSize = Math.random() * 1 + 1 + 'rem'; // 1rem to 2rem
                    
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 12000); // Remove after animation completes
                };
                setInterval(createHeart, 400); 
            }
            // --- End Heart Animation ---

            const quotes = [
                "I love you without knowing how, or when, or from where. I love you simply, without problems or pride.", "The best thing to hold onto in life is each other.", "You know you're in love when you can't fall asleep because reality is finally better than your dreams.", "To the world, you may be one person, but to one person you are the world.", "I saw that you were perfect, and so I loved you. Then I saw that you were not perfect and I loved you even more.", "You are my sun, my moon, and all of my stars.", "If I had a flower for every time I thought of you, I could walk through my garden forever.", "My heart is and always will be yours.", "I want to be with you till my last page.", "A true love story never ends.", "I've fallen in love many times... always with you.", "Love is a song that never ends.", "We are shaped and fashioned by those we love.", "The greatest thing you'll ever learn is just to love and be loved in return.", "You are my today and all of my tomorrows."
            ];

            const nehaDetails = { fullName: "Neha Tiwari", gender: "Female", dob: "03/02/1999", pob: "Lucknow", religion: "Hindu", profession: "Teacher" };
            const abhayDetails = { fullName: "Abhay Mishra", gender: "Male", dob: "14/02/2000", pob: "Barabanki", religion: "Hindu", profession: "IT Engineer" };

            // --- NEW DECOUPLED DATASETS ---

            const professions = [ "Doctor", "Engineer", "Teacher", "Artist", "Scientist", "Lawyer", "Chef", "Writer", "Software Developer", "Architect" ];
            const placesOfBirth = [ "Mumbai", "Delhi", "Bengaluru", "Chennai", "Kolkata", "Hyderabad", "Pune", "Ahmedabad", "Jaipur", "Lucknow", "Chandigarh", "Kochi", "Bhopal", "Patna", "Guwahati" ];
            const religions = ["Hindu", "Muslim", "Buddhist", "Christian"];

            const namesByReligion = {
                hindu: {
                    male: ["Arjun Sharma","Rohan Verma","Kunal Iyer","Siddharth Reddy","Vikram Choudhary","Rahul Mehta","Nikhil Bansal","Ankit Dubey","Harsh Tiwari","Manish Yadav","Suresh Joshi","Rajat Kapoor","Deepak Saxena","Aditya Mishra","Sandeep Ghosh","Pranav Kulkarni","Gaurav Shukla","Ramesh Patil","Amit Malhotra","Nitin Khatri","Vivek Trivedi","Shivam Bhargava","Ravi Deshmukh","Akhil Pandey","Krishna Nair","Karthik Chatterjee","Saurabh Jha","Rajeev Gupta","Pankaj Sinha","Anurag Agrawal","Lokesh Rao","Tarun Pillai","Yash Chauhan","Dinesh Menon","Vikas Rathore","Uday Choksi","Bhavesh Shetty","Mohan Saxena","Prem Lalwani","Navin Bajaj","Sameer Goyal","Rajesh Bhat","Ajay Soni","Ashok Venkatesh","Arvind Jain","Suraj Kaul","Mukesh Sehgal","Devendra Ranga","Hemant Mittal","Sunil Banerjee"],
                    female: ["Priya Sharma","Sneha Verma","Pooja Iyer","Ankita Reddy","Kavya Choudhary","Ritu Mehta","Neha Bansal","Shweta Dubey","Komal Tiwari","Meena Yadav","Sunita Joshi","Isha Kapoor","Anjali Saxena","Radhika Mishra","Mitali Ghosh","Tanvi Kulkarni","Swati Shukla","Seema Patil","Simran Malhotra","Kiran Khatri","Megha Trivedi","Pallavi Bhargava","Jyoti Deshmukh","Aarti Pandey","Lakshmi Nair","Sapna Chatterjee","Bhavana Jha","Divya Gupta","Nisha Sinha","Payal Agrawal","Rajni Rao","Geeta Pillai","Vidya Chauhan","Reshma Menon","Kirti Rathore","Sonal Choksi","Bhavna Shetty","Rekha Saxena","Preeti Lalwani","Deepa Bajaj","Richa Goyal","Purnima Bhat","Kusum Soni","Veena Venkatesh","Anusha Jain","Smita Kaul","Savita Sehgal","Shalini Ranga","Mona Mittal","Usha Banerjee"]
                },
                muslim: {
                    male: ["Ahmed Khan","Mohammed Ali","Irfan Qureshi","Salman Sheikh","Imran Ansari","Naeem Siddiqui","Faisal Malik","Yusuf Syed","Sameer Farooqi","Zubair Pathan","Aslam Baig","Nadeem Pasha","Wasim Mirza","Arif Hashmi","Rehan Warsi","Adil Qadri","Rashid Chaudhry","Tariq Nawaz","Shahid Rahman","Sohail Kazmi","Aamir Jilani","Farhan Abbasi","Noman Rizvi","Shahrukh Gill","Javed Dar","Arshad Naqvi","Khalid Usmani","Parvez Haider","Raheel Sabri","Sajid Chaudhary","Zeeshan Gauri","Owais Mir","Nasir Awan","Tanveer Saifi","Kamran Lodhi","Bilal Chaudhari","Azhar Poonawala","Majid Chishti","Shahbaz Siddiqi","Firoz Nizami","Hamid Khan","Imtiaz Abbasi","Tabrez Qadri","Munir Warsi","Zafar Malik","Saifuddin Shaikh","Ilyas Ansari","Sarfaraz Mirza","Rahim Dar","Aqeel Baig"],
                    female: ["Fatima Khan","Ayesha Ali","Saba Qureshi","Zainab Sheikh","Nazia Ansari","Shabnam Siddiqui","Sania Malik","Rukhsar Syed","Aafreen Farooqi","Hina Pathan","Parveen Baig","Razia Pasha","Tabassum Mirza","Asiya Hashmi","Nafisa Warsi","Sabreen Qadri","Rubina Chaudhry","Nargis Nawaz","Tahira Rahman","Sadia Kazmi","Fouzia Jilani","Samina Abbasi","Nilofer Rizvi","Shagufta Gill","Lubna Dar","Farzana Naqvi","Shazia Usmani","Bushra Haider","Seher Sabri","Mariam Chishti","Amreen Lodhi","Humaira Gillani","Rida Abbasi","Sahar Rizvi","Nashra Mir","Fiza Shaikh","Yasmeen Poonawala","Hafsa Naqvi","Iqra Qadri","Javeria Mirza","Sumbul Warsi","Roohi Malik","Rukhsana Khan","Noor Jahan","Mehnaz Siddiqui","Aleena Ansari","Aqsa Farooqi","Sakeena Usmani","Madiha Hashmi","Zoya Kazmi"]
                },
                buddhist: {
                    male: ["Tenzin Dorjee","Karma Wangchuk","Lobsang Norbu","Sonam Gyatso","Pema Rinchen","Jigme Dorji","Ngawang Tashi","Sangay Lama","Tashi Phuntsok","Dorjee Sherpa","Phurba Tamang","Choden Lama","Kunga Tharpa","Pasang Lobsang","Dawa Gyaltshen","Yeshi Wangdi","Tenzin Namgyal","Kelsang Dorjee","Ngodup Tsering","Chime Rinchen","Pelden Wangyal","Sonam Phurbu","Lhundup Dorji","Norbu Gyeltshen","Karma Choedon","Tshering Dorjee","Dorji Wangchuk","Ngawang Choden","Lobsang Tshering","Pema Dorji","Sangpo Lama","Phuntsok Norbu","Dawa Tamang","Tenzin Gyeltshen","Chogyal Dorjee","Tsering Wangdi","Jamphel Lama","Rigzin Norbu","Samten Dorji","Yeshi Gyaltshen","Ngawang Dorjee","Pema Tenzin","Kelsang Norbu","Karma Rinchen","Dorjee Tsering","Sonam Dorji","Namgyal Lama","Tshering Phuntsok","Lobsang Dorji","Tashi Wangchuk"],
                    female: ["Pema Choden","Tenzin Dolma","Karma Lhamo","Sonam Deki","Dawa Dolkar","Choden Wangmo","Sangmo Tsering","Yeshi Dolma","Lhamo Yangchen","Pelden Chokyi","Dechen Dolkar","Tsering Lhamo","Chime Deki","Ngawang Choden","Kalsang Drolma","Norzin Wangmo","Pema Dolkar","Sangay Drolma","Tshering Dolma","Dolkar Wangmo","Tenzin Choden","Sonam Yangchen","Karma Dolkar","Lobsang Lhamo","Dawa Yangzom","Choden Dolma","Yeshi Lhamo","Pema Drolma","Kunsang Choden","Sangmo Dolkar","Tsering Yangchen","Pelden Lhamo","Dechen Choden","Karma Deki","Dolma Yangzom","Sonam Choden","Tenzin Yangchen","Chime Lhamo","Yeshi Wangmo","Lhamo Deki","Kalsang Choden","Pema Yangzom","Dawa Choden","Norzin Dolma","Dolkar Choden","Tsering Dolkar","Ngawang Lhamo","Choden Yangchen","Pelden Dolma","Sangmo Choden"]
                },
                christian: {
                    male: ["John D’Souza","Peter Fernandes","Mark Rodrigues","Paul D’Costa","David Pereira","Samuel Gomes","Thomas Sequeira","Daniel Menezes","Joseph Pinto","Matthew D’Silva","Andrew Castelino","Stephen D’Mello","Anthony Dias","Gabriel Noronha","Benjamin Carvalho","Victor Barretto","Luke Fernandes","Simon Mascarenhas","Elijah Pinto","Philip D’Cruz","Noel Cardozo","Francis Rebello","Richard Coutinho","Gerald Rosario","Clifford Lobo","Julian Fernandes","Edward Gomes","Michael D’Souza","Albert Rodrigues","Christopher Menezes","Lawrence Pinto","Raymond Sequeira","Patrick Noronha","Jerome Castelino","Adrian Pereira","Dominic Fernandes","Ronald Pinto","Raphael D’Silva","Dennis Carvalho","Allan D’Costa","Felix Gomes","Ivan Rodrigues","George Sequeira","Nigel Mascarenhas","Clinton D’Mello","Austin Dias","Albert Rebello","Victor Coutinho","Elton Barretto"],
                    female: ["Mary D’Souza","Grace Fernandes","Lydia Rodrigues","Anna D’Costa","Rachel Pereira","Sarah Gomes","Martha Sequeira","Elizabeth Menezes","Clara Pinto","Rebecca D’Silva","Naomi Castelino","Esther D’Mello","Irene Dias","Deborah Noronha","Priscilla Carvalho","Angela Barretto","Ruth Fernandes","Phoebe Mascarenhas","Julia Pinto","Joanna D’Cruz","Catherine Cardozo","Diana Rebello","Agnes Coutinho","Christine Rosario","Monica Lobo","Sophia Fernandes","Janet Gomes","Olivia D’Souza","Patricia Rodrigues","Teresa Menezes","Caroline Pinto","Susanna Sequeira","Gloria Noronha","Miriam Castelino","Evelyn Pereira","Clara Fernandes","Victoria Pinto","Jennifer D’Silva","Helena Carvalho","Christina D’Costa","Melody Gomes","Rosalind Rodrigues","Joan Sequeira","Amanda Mascarenhas","Celina D’Mello","Beatrice Dias","Lucy Rebello","Stella Coutinho","Cecilia Barretto","Annabelle Noronha"]
                }
            };
            
            // --- END OF NEW DATASETS ---

            const calculateAge = (dobString) => {
                const [day, month, year] = dobString.split('/').map(Number);
                const birthDate = new Date(year, month - 1, day);
                const today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                return age;
            };

            const isValidDate = (dobString) => {
                const dateRegex = /^(\d{2})\/(\d{2})\/(\d{4})$/;
                if (!dateRegex.test(dobString)) return false;
                const [day, month, year] = dobString.split('/').map(Number);
                const date = new Date(year, month - 1, day);
                return date.getFullYear() === year && date.getMonth() === month - 1 && date.getDate() === day;
            };

            const areDetailsEqual = (user, target) => {
                return Object.keys(target).every(key => 
                    user[key]?.toLowerCase().trim() === target[key]?.toLowerCase().trim()
                );
            };

            // --- REWRITTEN FUNCTION TO GENERATE RANDOM PARTNER ---
            const generateRandomPartner = (userGender, userAge) => {
                // Determine partner's gender
                const futureGender = userGender.toLowerCase() === 'female' ? 'Male' : 'Female';
                
                // Pick random details from each dataset
                const futureReligion = religions[Math.floor(Math.random() * religions.length)];
                const futureProfession = professions[Math.floor(Math.random() * professions.length)];
                const futurePob = placesOfBirth[Math.floor(Math.random() * placesOfBirth.length)];

                // Pick a name based on the randomly selected religion and required gender
                const religionKey = futureReligion.toLowerCase();
                const genderKey = futureGender.toLowerCase();
                const nameList = namesByReligion[religionKey][genderKey];
                const futureFullName = nameList[Math.floor(Math.random() * nameList.length)];

                // Calculate a random age and DOB
                const minAge = Math.max(21, userAge - 4);
                const maxAge = Math.min(50, userAge + 4);
                const futureAge = Math.floor(Math.random() * (maxAge - minAge + 1)) + minAge;
                const currentYear = new Date().getFullYear();
                const futureBirthYear = currentYear - futureAge;
                const futureDob = new Date(futureBirthYear, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toLocaleDateString('en-GB');

                // Return the complete, randomly generated partner object
                return {
                    fullName: futureFullName,
                    gender: futureGender,
                    dob: futureDob,
                    pob: futurePob,
                    religion: futureReligion,
                    profession: futureProfession,
                    age: futureAge
                };
            };
            
            const showMessage = (message) => {
                messageBox.textContent = message;
                messageBox.style.display = 'block';
                setTimeout(() => { messageBox.style.display = 'none'; }, 4000);
            };

            nameInput.addEventListener('input', (event) => { event.target.value = event.target.value.replace(/[^a-zA-Z\s]/g, ''); });
            pobInput.addEventListener('input', (event) => { event.target.value = event.target.value.replace(/[^a-zA-Z\s]/g, ''); });
            professionInput.addEventListener('input', (event) => { event.target.value = event.target.value.replace(/[^a-zA-Z\s]/g, ''); });
            dobInput.addEventListener('input', (event) => {
                let value = event.target.value.replace(/[^0-9]/g, '');
                if (value.length > 2) value = value.slice(0, 2) + '/' + value.slice(2);
                if (value.length > 5) value = value.slice(0, 5) + '/' + value.slice(5);
                event.target.value = value.slice(0, 10);
            });

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const userDetails = Object.fromEntries(formData.entries());

                if (!isValidDate(userDetails.dob)) {
                    showMessage("Please enter a valid date in DD/MM/YYYY format.");
                    return;
                }
                const userAge = calculateAge(userDetails.dob);
                if (userAge < 18 || userAge > 50) {
                    showMessage("Age must be between 18 and 50 years old.");
                    return;
                }

                let futurePartner;
                if (areDetailsEqual(userDetails, nehaDetails)) {
                    futurePartner = { ...abhayDetails, age: calculateAge(abhayDetails.dob) };
                } else if (areDetailsEqual(userDetails, abhayDetails)) {
                    futurePartner = { ...nehaDetails, age: calculateAge(nehaDetails.dob) };
                } else {
                    futurePartner = generateRandomPartner(userDetails.gender, userAge);
                }

                const searcherName = userDetails.fullName;
                const possessiveName = searcherName.endsWith('s') ? `${searcherName}'` : `${searcherName}'s`;
                const partnerTitle = userDetails.gender.toLowerCase() === 'male' ? "Future Wife" : "Future Husband";
                document.getElementById('results-heading').textContent = `${possessiveName} ${partnerTitle} Is...`;

                document.getElementById('futureName').textContent = futurePartner.fullName;
                document.getElementById('futureGender').textContent = futurePartner.gender;
                document.getElementById('futureAge').textContent = futurePartner.age;
                document.getElementById('futureDob').textContent = futurePartner.dob;
                document.getElementById('futurePob').textContent = futurePartner.pob;
                document.getElementById('futureReligion').textContent = futurePartner.religion;
                document.getElementById('futureProfession').textContent = futurePartner.profession;
                document.getElementById('loveQuote').textContent = `“${quotes[Math.floor(Math.random() * quotes.length)]}”`;

                formContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            });

            goBackButton.addEventListener('click', () => {
                formContainer.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                document.getElementById('results-heading').textContent = 'Your Forever Match';
                form.reset();
            });
        });
    </script>
</body>
</html>
